
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Title</title>

    <link href="https://cdn.bootcss.com/twitter-bootstrap/3.3.4/css/bootstrap.min.css"
          rel="stylesheet">
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
</head>
<body>
<div class="container">

    <h2>查询车票</h2>
    <hr/>
    <div class="form-group">
        <label>出发站</label> <input type="text"
                                  id="origin" class="form-control"/>
    </div>
    <div class="form-group">
        <label>终点站</label> <input type="text" id="destination" class="form-control"/>
    </div>
    <div class="form-group">
        <label>出发日期</label> <input type="dates"
                                   id="dates" class="form-control"/>
    </div>

    <button class="btn btn-primary" type="submit">查询</button>

</div>
<br/>
<div class="container">
    <table class="table">
        <thead>
        <tr>
            <td>车次</td>
            <td>类型</td>
            <td>发站</td>
            <td>到站</td>
            <td>发时</td>
            <td>到时</td>
            <td>运行时间</td>
            <td>天数</td>
            <td>价格</td>
            <td>余票</td>

        </tr>
        </thead>
        <tbody id="chepiao">

        </tbody>


    </table>

</div>
</body>
<script>
    $("button").click(function () {
        var origin = $("#origin").val();
        var destination = $("#destination").val();
        var dates = $("#dates").val();

        var myjson = {userid:"aaa111@163.com",seckey:"970fcf26a3f513a1c4e5a6e6c63e8c65",startStation: origin, arriveStation: destination, date: dates};

        $(function () {
            $.ajax({
                url: "/cp3",
                type: "POST",
                async: true,
                cache: false,
                datatype: "json",
                contentType: "application/json;charset=UTF-8",
                data: JSON.stringify(myjson),
                success: function (data) {
                    $("#chepiao").empty();
                    var s = data.data;
                    for (i in s) {
                        $("#chepiao").append("<tr><td>" + s[i].trainCode + "</td><td>" + s[i].trainGrade + "</td><td>" + s[i].startStation + "</td><td>" + s[i].arriveStation + "</td><td>"
                            + s[i]['startTime'] + "</td><td>" + s[i]['endTime'] + "</td><td>" + s[i].takeTime + "</td><td>" + s[i]['hard-seat-prc'] + "</td><td>"
                            + s[i]['hard-seat'] + "</td></tr>");
                    }
                },
                error: function (data) {
                    alert("出错" + data);
                }
            });
        });
    })
</script>
<script src="https://cdn.bootcss.com/twitter-bootstrap/3.3.4/js/bootstrap.min.js"></script>

</html>
